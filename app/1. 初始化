一. 初始化控件

        // 1. 创建openGl
        EglBase eglBase = EglBase.create();
        // 2. 获取上下文
        EglBase.Context eglBaseContext = eglBase.getEglBaseContext();
        // 3. 根据上下文初始化
        localView.init(eglBaseContext,null);
        remoteView.init(eglBaseContext,null);
        // 4. 设置本地端控件悬浮
        localView.setZOrderOnTop(true);
        localView.setEnableHardwareScaler(true);
        // 5. 设置远端缩放全屏以及镜像
        remoteView.setScalingType(RendererCommon.ScalingType.SCALE_ASPECT_FILL);
        remoteView.setMirror(true);
        remoteView.setEnableHardwareScaler(true);

二. 初始化WebRtc




三. 开始连接


四. 初始化本地预览图像


五. 发送SDP


六. 开始连接


1. 创建openGl绘制,获取绘制全局上下文


ps: 特效 RenderEvent中第二个方法

2. 设置本地view悬浮 硬件加速(需求:类似微信,右下角本地悬浮,点击本地和远端切换)

3. 设置缩放

4. 设置镜像内存 -> 加快读取速度

5. 设置连接参数 --> 设置辅助类 PeerConnectionClient

    连接回调接口 -->

    主要分为 画面 音频 视频 三种类型的参数

    1) videoCallEnabled
    2) loopback 回拨
    3) videoCodec 视频编码
    4) videoCodecHwAcceleration 硬编码

    创建连接
    1) 创建线程池进行耗时操作
        PeerConnectionFactory
        a. 创建连接通道 并且初始化

        WebRctAudioUtils
        b. 自动挂断
        c. 自动操作

        options为factory参数

连接房间服务器

    房间服务器接口

WebSocketRtcClient


ps: HandlerThread



